<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Closures</title>
    <style>
        body {
            background: #000;
            font-size: 18px;
            color: #fff;
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>
</head>

<body>
    <h1>Closures</h1>

    <script>

        // Write a function that returns another function, where the inner function accesses a variable from the outer function's scope. Call the inner function and log the result.

        function parent() {
            const username = 'Shivam Kumar'
            return function child() {
                console.log(username);
            }
        }

        const children = parent()
        console.dir(children)
        children()
        console.log('');









        // Create a closure that maintains a private counter. Implement functions to increment and get the current value of the counter.

        function createCounter() {
            let count = 0;
            return {
                increment: function () {
                    count++;
                },
                getValue: function () {
                    console.log(count);
                }
            }
        }

        const counter = createCounter();
        console.log(counter);

        counter.increment()
        counter.getValue()

        counter.increment()
        counter.getValue()
        console.log('');







        // Write a function that generates unique IDs. Use a closure to keep track of the last generated ID and increment it with each call.

        function uniqueId() {
            let lastId = 0
            return function () {
                lastId++
                console.log(`ID${lastId}`);
            }
        }

        const generateId = uniqueId()

        generateId()
        generateId()
        console.log('');







        // Create a closure that captures a user's name and returns a function that greets the user by name.

        function user(name) {
            return function () {
                console.log('Hello,', name);
            }
        }

        const user1 = user('Rohan Singh')
        console.dir(user1)
        user1()

        user('Chetan Singh')()
        console.log('');








        // Write a loop that creates an array of functions. Each function should log its index when called. Use a closure to ensure each function logs the correct index.

        const functionArray = [];

        for (let i = 0; i < 5; i++) {
            functionArray.push(
                function () {
                    console.log(i);
                }
            );
        }

        // for (let i = 0; i < 5; i++) {
        //     functionArray.push(
        //         (function (index) {
        //             return function () {
        //                 console.log(index);
        //             };
        //         })(i)
        //     );
        // }

        console.log(typeof functionArray);
        console.log(functionArray);

        functionArray.forEach(func => {
            func()
            console.dir(func);
        } );








        // Use closures to create a simple module for managing a collection of items. Implement methods to add, remove, and list items.



    </script>
</body>

</html>